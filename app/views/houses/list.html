<div data-ng-controller="HousesController" data-ng-init='getHouse();getArea()'>
  <h2>House List {{currentPage}}/{{ numberOfPages(areaHouse) }}</h2>
  	<input type="text" class="form-control" ng-model="currentPage">
	<div class="row">
		<div class="col-xs-6">
			<select
				ng-disabled="loading" 
				data-ng-model="cityId" 
				name="cityInfo" 
				required="required"
				data-ng-options="c.Id as c.name for c in infos.cities"
				class="form-control"
				ng-change="getHouse();getArea(cityId);flag[flagIndex] = false;searchArea='';areaHouse.length=0;">
			</select>
		</div>	
		<div class="col-xs-6">	
			<select
				ng-disabled="loading" 
				data-ng-model="typeId" 
				name="typeInfo" 
				required="required"
				data-ng-options="c.Id as c.name for c in infos.types"
				class="form-control"
				ng-change="getHouse();flag[flagIndex] = false">
			</select>
		</div>
	</div>
	<br>
	<div class="row">
		<div class="col-xs-3 col-md-1" style="margin-top:2px;" ng-repeat="area in locations">
			<button ng-disabled="loading" 
			        ng-click="changeArea(area);" class="btn btn-warning btn-sm">{{ area }}</button>
		</div>		
	</div>
	<br><br>
	<div class="alert alert-info" data-ng-show="loading">LOADING</div>

  	<div data-ng-show="!loading">
  		<div>
	  		<table class="table table-bordered">
	  			<thead>
	  				<tr>
		  				<th>地址</th>
		  				<th>單價</th>
		  				<th>總價</th>
		  				<th></th>
		  			</tr>	
	  			</thead>
	  			<tbody ng-repeat="house in filterArea(houses, searchArea) | limitTo:searchsize.limit"
	  				   data-hg-init="flag[$index] = false">
			  		<tr>
						<td ng-repeat="(key, value) in filterList(house)">{{ value }}</td>
						<td>
							<button ng-click="flag[$index]=!flag[$index];checkFlagIndex($index)" 
									class="btn btn-primary btn-sm">
									詳細
							</button>
						</td>
					</tr>
					<tr ng-show="flag[$index]">
						<td colspan="4">
							<table class="table table-striped">
								<tr ng-repeat="(key, value) in house">
									<td>{{ key }}</td><td>{{ value }}</td>
								</tr>	
							</table>
						</td>	
					</tr>
				</tbody>
			</table>
		</div>
		<!--<div class="pagination text-center" ng-show="numberOfPages() > 1">
		    <ul>
		        <li ng-click="paginator.firstPage()" ng-class="paginator.isFirstPage() && 'disabled'">
		            <a>
		                <i class="icon-fast-backward" ng-class="paginator.isFirstPage() && 'icon-white'"></i>
		            </a>
		        </li>
		        <li ng-click="paginator.perviousPage()" ng-class="paginator.isFirstPage() && 'disabled'">
		            <a>
		                <i class="icon-step-backward" ng-class="paginator.isFirstPage() && 'icon-white'"></i>
		            </a>
		        </li>
		        <li ng-click="paginator.setPage(i)" ng-repeat="i in [] | forLoop:0:numberOfPages()" ng-class="paginator.page==i && 'active'">
		            <a>{{i+1}}</a>
		        </li>
		        <li ng-click="paginator.nextPage()" ng-class="paginator.isLastPage() && 'disabled'">
		            <a>
		                <i class="icon-step-forward" ng-class="paginator.isLastPage() && 'icon-white'"></i>
		            </a>
		        </li>
		        <li ng-click="paginator.lastPage()" ng-class="paginator.isLastPage() && 'disabled'">
		            <a>
		                <i class="icon-fast-forward" ng-class="paginator.isLastPage() && 'icon-white'"></i>
		            </a>
		        </li>
		    </ul>
		</div>-->
	</div>
</div>